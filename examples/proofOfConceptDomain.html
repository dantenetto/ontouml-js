<!DOCTYPE html>
<html>
    <head>
        <title>battle roles</title>
        <meta http-equiv="content-type" content="text/html;charset=utf-8">
    </head>
    <body>
        <script src="../core.js"></script>
        <script src="../events.module.js"></script>
        <script src="../sets.module.js"></script>
        <script src="../ontouml.sets.js"></script>
        <script src="../domain.layer.js"></script>
        <script src="../world.layer.js"></script>
        <script type="text/javascript">
            matrimonialDomain = domain.new({
                kinds: {
                    person: {
                        set: {
                            name: null,
                            age: null,

                            talk: function () {
                                console.log('hellow');
                            }
                        }
                    },

                    man: {
                        base: 'person',
                        set: {
                            gender: 'male'
                        }
                    },

                    woman: {
                        base: 'person',
                        set: {
                            gender: 'famele'
                        }
                    },
                },

                phases: {
                    child: {
                        specializationOf: 'person',

                        rules: {
                            'beforeBecome:target': function (e) {
                                if (e.sender.age >= 18) e.preventAction();
                            }
                        },

                        set: {
                            phaseGroupId: 'stages-of-life',
                        }
                    },

                    adult: {
                        specializationOf: 'person',

                        rules: {
                            'beforeBecome:target': function (e) {
                                if (e.sender.age < 18) e.preventAction();
                            }
                        },

                        set: {
                            phaseGroupId: 'stages-of-life',
                        }
                    },
                },

                roles: {
                    partner: {
                        specializationOf: 'adult',

                        set: {
                        }
                    },

                    husband: {
                        specializationOf: 'man',
                        base: 'partner',

                        set: {
                            
                        }
                    }
                }
            });
            
        </script>
        
    </body>
</html>
